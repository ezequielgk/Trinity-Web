<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Documentación Wiki - Trinity Launcher | Guías y Tutoriales</title>
    <meta name="description" content="Documentación completa de Trinity Launcher. Guías de instalación, configuración, gestión de instancias, mods y recursos para Minecraft Bedrock en Linux.">
    <meta name="keywords" content="trinity launcher documentación, wiki minecraft bedrock, guías instalación, configuración launcher, gestión instancias, mods minecraft, texturas bedrock, tutoriales linux">
    <meta name="author" content="Trinity Launcher Team">
    <meta name="robots" content="index, follow">
    <meta name="language" content="es">
    <meta name="theme-color" content="#8b5cf6">
    <meta name="generator" content="Trinity Launcher">
    <meta name="rating" content="general">
    <meta name="application-name" content="Trinity Launcher">
    
    <link rel="canonical" href="https://trinitylauncher.vercel.app/pages/wiki.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://trinitylauncher.vercel.app/pages/wiki.html">
    <meta property="og:title" content="Documentación Wiki - Trinity Launcher">
    <meta property="og:description" content="Documentación completa de Trinity Launcher con guías de instalación, configuración, gestión de instancias, mods y recursos para Minecraft Bedrock.">
    <meta property="og:image" content="https://trinitylauncher.vercel.app/assets/images/trinity-launcher-preview.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Trinity Launcher - Documentación Wiki">
    <meta property="og:site_name" content="Trinity Launcher">
    <meta property="og:locale" content="es_ES">
    <meta property="article:section" content="Documentación">
    <meta property="article:author" content="Trinity Launcher Team">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Documentación Wiki - Trinity Launcher">
    <meta name="twitter:description" content="Documentación completa de Trinity Launcher con guías para gestión de instancias, mods y recursos de Minecraft Bedrock.">
    <meta name="twitter:image" content="https://trinitylauncher.vercel.app/assets/images/trinity-launcher-preview.jpg">
    <meta name="twitter:image:alt" content="Trinity Launcher - Documentación Wiki">
    <meta name="twitter:site" content="@TrinityLauncher">
    <meta name="twitter:creator" content="@TrinityLauncher">
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="../assets/icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/icons/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/icons/apple-touch-icon.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    
    <!-- Structured Data for Documentation -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TechArticle",
      "headline": "Documentación Wiki - Trinity Launcher",
      "description": "Documentación completa de Trinity Launcher con guías de instalación, configuración, gestión de instancias, mods y recursos para Minecraft Bedrock en Linux",
      "author": {
        "@type": "Organization",
        "name": "Trinity Launcher Team",
        "url": "https://trinitylauncher.vercel.app"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Trinity Launcher",
        "url": "https://trinitylauncher.vercel.app"
      },
      "datePublished": "2024-01-01",
      "dateModified": "2024-01-15",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://trinitylauncher.vercel.app/pages/wiki.html"
      },
      "about": {
        "@type": "SoftwareApplication",
        "name": "Trinity Launcher",
        "description": "Launcher open source para Minecraft Bedrock",
        "applicationCategory": "GameApplication",
        "operatingSystem": "Linux"
      },
      "audience": {
        "@type": "Audience",
        "audienceType": "Developers, Gamers"
      }
    }
    </script>
</head>
<body class="bg-navy-950 text-white min-h-screen">
    <!-- Navigation -->
    <div id="navigation-container"></div>

    <!-- Main Content -->
    <main class="flex-1">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Sidebar -->
                <aside class="lg:w-1/4" role="navigation" aria-label="Navegación de documentación">
                    <div class="bg-navy-900/50 backdrop-blur-sm border border-navy-800 rounded-xl p-6 sticky top-24">
                        <h3 class="text-lg font-semibold mb-4">Documentación</h3>
                        <nav class="space-y-2" id="wiki-sidebar">
                            <!-- Contenido cargado dinámicamente -->
                        </nav>
                    </div>
                </aside>

                <!-- Content -->
                <section class="lg:w-3/4" role="main" aria-label="Contenido de documentación">
                    <div id="wiki-content">
                        <!-- Contenido cargado dinámicamente -->
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <div id="footer-container"></div>

    <script src="../js/main.js"></script>
    <script src="../js/navigation.js"></script>
    <script>
    // Wiki-specific functionality
    let currentSection = 'getting-started';
    let wikiData = { config: {}, sections: {} };

   // Función para procesar variables en contenido HTML
    function processHTMLVariables(content, config) {
        if (!content || !config || !config.links) return content;
        
        try {
            return content
                .replaceAll('{{discord}}', config.links.discord || '#')
                .replaceAll('{{download}}', config.links.download || '#')
                .replaceAll('{{github}}', config.links.github || '#')
                .replaceAll('{{flatpaksetup}}', config.links.flatpaksetup || '#')
                .replaceAll('{{version}}', config.version || '1.0.0')
                .replaceAll('{{fileSize}}', config.fileSize || '50MB');
        } catch (error) {
            console.error('Error processing variables:', error);
            return content;
        }
}
    // Función legacy para compatibilidad
    function processVariables(content, config) {
        return processHTMLVariables(content, config);
    }

    async function loadWikiContent() {
        try {
            // Cargar configuración desde configs.json
            const configResponse = await fetch('../data/wiki-content/configs.json');
            if (!configResponse.ok) {
                throw new Error(`HTTP ${configResponse.status}: ${configResponse.statusText}`);
            }
            wikiData.config = await configResponse.json();
            
            // Definir las secciones disponibles y sus títulos
            wikiData.sections = {
                'getting-started': { title: 'Comenzando', loaded: false, content: '' },
                'installation': { title: 'Instalación', loaded: false, content: '' },
                'configuration': { title: 'Configuración', loaded: false, content: '' },
                'support': { title: 'Soporte', loaded: false, content: '' }
            };
            
            renderSidebar();
            await showWikiSection(currentSection);
            updatePageTitle();
        } catch (error) {
            console.error('Error loading wiki content:', error);
            const contentDiv = document.getElementById('wiki-content');
            if (contentDiv) {
                contentDiv.innerHTML = `
                    <div class="bg-red-900/20 border border-red-700 rounded-lg p-6">
                        <h3 class="text-red-400 font-semibold mb-2">Error al cargar la documentación</h3>
                        <p class="text-gray-300">Verifica que los archivos de configuración estén disponibles.</p>
                        <p class="text-gray-400 text-sm mt-2">Error: ${error.message}</p>
                    </div>
                `;
            }
        }
    }

    function updatePageTitle() {
        try {
            if (wikiData.sections && wikiData.sections[currentSection]) {
                document.title = `${wikiData.sections[currentSection].title} - Documentación Wiki | Trinity Launcher`;
            }
        } catch (error) {
            console.error('Error updating title:', error);
        }
    }

    function renderSidebar() {
        try {
            const sidebar = document.getElementById('wiki-sidebar');
            if (!sidebar) return;
            
            sidebar.innerHTML = Object.keys(wikiData.sections).map(sectionId => `
                <button onclick="showWikiSection('${sectionId}')" 
                        class="wiki-nav block w-full text-left text-gray-300 hover:text-primary-400 py-2 px-3 rounded transition-colors"
                        data-section="${sectionId}"
                        aria-label="Navegar a ${wikiData.sections[sectionId].title}">
                    ${wikiData.sections[sectionId].title}
                </button>
            `).join('');
        } catch (error) {
            console.error('Error rendering sidebar:', error);
        }
    }

    async function showWikiSection(sectionId) {
        try {
            currentSection = sectionId;
            const content = document.getElementById('wiki-content');
            const section = wikiData.sections[sectionId];
            
            if (!content || !section) return;

            // Mostrar loading mientras carga
            content.innerHTML = `
                <article class="fade-in">
                    <header>
                        <h1 class="text-4xl font-bold mb-6">${section.title}</h1>
                    </header>
                    <div class="flex items-center justify-center py-12">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-400"></div>
                        <span class="ml-3 text-gray-400">Cargando contenido...</span>
                    </div>
                </article>
            `;

            // Cargar contenido desde archivo HTML si no está cargado
            if (!section.loaded) {
                try {
                    const response = await fetch(`../data/wiki-content/${sectionId}.html`);
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    const htmlContent = await response.text();
                    
                    // Extraer solo el contenido del contenedor principal
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(htmlContent, 'text/html');
                    const contentContainer = doc.querySelector('body > div');
                    
                    if (contentContainer) {
                        section.content = processHTMLVariables(contentContainer.innerHTML, wikiData.config);
                    } else {
                        section.content = processHTMLVariables(htmlContent, wikiData.config);
                    }
                    section.loaded = true;
                } catch (error) {
                    console.error(`Error loading section ${sectionId}:`, error);
                    section.content = `
                        <div class="bg-red-900/20 border border-red-700 rounded-lg p-6">
                            <h3 class="text-red-400 font-semibold mb-2">Error al cargar contenido</h3>
                            <p class="text-gray-300">No se pudo cargar el contenido de la sección "${section.title}".</p>
                            <p class="text-gray-400 text-sm mt-2">Verifica que el archivo "${sectionId}.html" existe en data/wiki-content/</p>
                            <p class="text-gray-400 text-sm">Error: ${error.message}</p>
                        </div>
                    `;
                    section.loaded = true;
                }
            }

            // Mostrar contenido
            content.innerHTML = `
                <article class="fade-in">
                    <div class="prose prose-invert max-w-none">
                        ${section.content}
                    </div>
                </article>
            `;
            updatePageTitle();

            // Update navigation
            document.querySelectorAll('.wiki-nav').forEach(link => {
                link.classList.remove('bg-primary-500/20', 'text-primary-400');
                link.classList.add('text-gray-300');
            });
            
            const activeLink = document.querySelector(`[data-section="${sectionId}"]`);
            if (activeLink) {
                activeLink.classList.add('bg-primary-500/20', 'text-primary-400');
                activeLink.classList.remove('text-gray-300');
            }
        } catch (error) {
            console.error('Error showing wiki section:', error);
        }
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
        loadWikiContent();
    });
    </script>
</body>
</html>