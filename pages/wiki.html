<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>Wiki Documentation - Trinity Launcher | Guides and Tutorials</title>
    <meta name="description" content="Complete Trinity Launcher documentation. Installation guides, configuration, instance management, mods and resources for Minecraft Bedrock on Linux.">
    <meta name="keywords" content="trinity launcher documentation, minecraft bedrock wiki, installation guides, launcher configuration, instance management, minecraft mods, bedrock textures, linux tutorials">
    <meta name="author" content="Trinity Launcher Team">
    <meta name="robots" content="index, follow">
    <meta name="language" content="en">
    <meta name="theme-color" content="#8b5cf6">
    <meta name="generator" content="Trinity Launcher">
    <meta name="rating" content="general">
    <meta name="application-name" content="Trinity Launcher">

    <link rel="canonical" href="https://trinitylauncher.vercel.app/pages/wiki.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://trinitylauncher.vercel.app/pages/wiki.html">
    <meta property="og:title" content="Wiki Documentation - Trinity Launcher">
    <meta property="og:description" content="Complete Trinity Launcher documentation with installation guides, configuration, instance management, mods and resources for Minecraft Bedrock.">
    <meta property="og:image" content="https://trinitylauncher.vercel.app/assets/images/trinity-launcher-preview.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Trinity Launcher - Wiki Documentation">
    <meta property="og:site_name" content="Trinity Launcher">
    <meta property="og:locale" content="en_US">
    <meta property="article:section" content="Documentation">
    <meta property="article:author" content="Trinity Launcher Team">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Wiki Documentation - Trinity Launcher">
    <meta name="twitter:description" content="Complete Trinity Launcher documentation with guides for instance management, mods and Minecraft Bedrock resources.">
    <meta name="twitter:image" content="https://trinitylauncher.vercel.app/assets/images/trinity-launcher-preview.jpg">
    <meta name="twitter:image:alt" content="Trinity Launcher - Wiki Documentation">
    <meta name="twitter:site" content="@TrinityLauncher">
    <meta name="twitter:creator" content="@TrinityLauncher">

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="../assets/icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/icons/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/icons/apple-touch-icon.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">


    <!-- Structured Data for Documentation -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TechArticle",
      "headline": "Wiki Documentation - Trinity Launcher",
      "description": "Complete Trinity Launcher documentation with installation guides, configuration, instance management, mods and resources for Minecraft Bedrock on Linux",
      "author": {
        "@type": "Organization",
        "name": "Trinity Launcher Team",
        "url": "https://trinitylauncher.vercel.app"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Trinity Launcher",
        "url": "https://trinitylauncher.vercel.app"
      },
      "datePublished": "2024-01-01",
      "dateModified": "2024-01-15",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://trinitylauncher.vercel.app/pages/wiki.html"
      },
      "about": {
        "@type": "SoftwareApplication",
        "name": "Trinity Launcher",
        "description": "Open source launcher for Minecraft Bedrock",
        "applicationCategory": "GameApplication",
        "operatingSystem": "Linux"
      },
      "audience": {
        "@type": "Audience",
        "audienceType": "Developers, Gamers"
      }
    }
    </script>
</head>
<body class="bg-navy-950 text-white min-h-screen">
    <!-- Navigation -->
    <div id="navigation-container"></div>

    <!-- Main Content -->
    <main class="flex-1">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Sidebar -->
                <aside class="lg:w-1/4" role="navigation" aria-label="Documentation navigation">
                    <div class="bg-navy-900/50 backdrop-blur-sm border border-navy-800 rounded-xl p-6 sticky top-24">
                        <h3 class="text-lg font-semibold mb-4">Documentation</h3>
                        <nav class="space-y-2" id="wiki-sidebar">
                            <!-- Dynamically loaded content -->
                        </nav>
                    </div>
                </aside>

                <!-- Content -->
                <section class="lg:w-3/4" role="main" aria-label="Documentation content">
                    <div id="wiki-content">
                        <!-- Dynamically loaded content -->
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <div id="footer-container"></div>

    <script src="../js/main.js"></script>
    <script src="../js/navigation.js"></script>
    <script>
    // Wiki-specific functionality
    let currentSection = 'getting-started';
    let wikiData = { config: {}, sections: {} };

   // Function to process variables in HTML content
    function processHTMLVariables(content, config) {
        if (!content || !config || !config.links) return content;

        try {
            return content
                .replaceAll('{{discord}}', config.links.discord || '#')
                .replaceAll('{{download}}', config.links.download || '#')
                .replaceAll('{{github}}', config.links.github || '#')
                .replaceAll('{{flatpaksetup}}', config.links.flatpaksetup || '#')
                .replaceAll('{{version}}', config.version || '1.0.0')
                .replaceAll('{{fileSize}}', config.fileSize || '50MB');
        } catch (error) {
            console.error('Error processing variables:', error);
            return content;
        }
}
    // Legacy function for compatibility
    function processVariables(content, config) {
        return processHTMLVariables(content, config);
    }

    async function loadWikiContent() {
        try {
            // Load configuration from configs.json
            const configResponse = await fetch('../data/wiki-content/configs.json');
            if (!configResponse.ok) {
                throw new Error(`HTTP ${configResponse.status}: ${configResponse.statusText}`);
            }
            wikiData.config = await configResponse.json();

            // Define available sections and their titles
            wikiData.sections = {
                'getting-started': { title: 'Getting Started', loaded: false, content: '' },
                'installation': { title: 'Installation', loaded: false, content: '' },
                'configuration': { title: 'Configuration', loaded: false, content: '' },
                'support': { title: 'Support', loaded: false, content: '' },
                'technical-docs': { title: 'Technical Documentation', loaded: false, content: '' },
                'vercel-analytics': { title: 'Vercel Analytics', loaded: false, content: '' }
            };

            renderSidebar();
            await showWikiSection(currentSection);
            updatePageTitle();
        } catch (error) {
            console.error('Error loading wiki content:', error);
            const contentDiv = document.getElementById('wiki-content');
            if (contentDiv) {
                contentDiv.innerHTML = `
                    <div class="bg-red-900/20 border border-red-700 rounded-lg p-6">
                        <h3 class="text-red-400 font-semibold mb-2">Error loading documentation</h3>
                        <p class="text-gray-300">Verify that the configuration files are available.</p>
                        <p class="text-gray-400 text-sm mt-2">Error: ${error.message}</p>
                    </div>
                `;
            }
        }
    }

    function updatePageTitle() {
        try {
            if (wikiData.sections && wikiData.sections[currentSection]) {
                document.title = `${wikiData.sections[currentSection].title} - Wiki Documentation | Trinity Launcher`;
            }
        } catch (error) {
            console.error('Error updating title:', error);
        }
    }

    function renderSidebar() {
        try {
            const sidebar = document.getElementById('wiki-sidebar');
            if (!sidebar) return;

            sidebar.innerHTML = Object.keys(wikiData.sections).map(sectionId => `
                <button onclick="showWikiSection('${sectionId}')"
                        class="wiki-nav block w-full text-left text-gray-300 hover:text-primary-400 py-2 px-3 rounded transition-colors"
                        data-section="${sectionId}"
                        aria-label="Navigate to ${wikiData.sections[sectionId].title}">
                    ${wikiData.sections[sectionId].title}
                </button>
            `).join('');
        } catch (error) {
            console.error('Error rendering sidebar:', error);
        }
    }

    async function showWikiSection(sectionId) {
        try {
            currentSection = sectionId;
            const content = document.getElementById('wiki-content');
            const section = wikiData.sections[sectionId];

            if (!content || !section) return;

            // Show loading while content loads
            content.innerHTML = `
                <article class="fade-in">
                    <header>
                        <h1 class="text-4xl font-bold mb-6">${section.title}</h1>
                    </header>
                    <div class="flex items-center justify-center py-12">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-400"></div>
                        <span class="ml-3 text-gray-400">Loading content...</span>
                    </div>
                </article>
            `;

            // Load content from HTML file if not loaded
            if (!section.loaded) {
                try {
                    const response = await fetch(`../data/wiki-content/${sectionId}.html`);
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    const htmlContent = await response.text();

                    // Extract only the content from the main container
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(htmlContent, 'text/html');
                    const contentContainer = doc.querySelector('body > div');

                    if (contentContainer) {
                        section.content = processHTMLVariables(contentContainer.innerHTML, wikiData.config);
                    } else {
                        section.content = processHTMLVariables(htmlContent, wikiData.config);
                    }
                    section.loaded = true;
                } catch (error) {
                    console.error(`Error loading section ${sectionId}:`, error);
                    section.content = `
                        <div class="bg-red-900/20 border border-red-700 rounded-lg p-6">
                            <h3 class="text-red-400 font-semibold mb-2">Error loading content</h3>
                            <p class="text-gray-300">Could not load content for section "${section.title}".</p>
                            <p class="text-gray-400 text-sm mt-2">Verify that the file "${sectionId}.html" exists in data/wiki-content/</p>
                            <p class="text-gray-400 text-sm">Error: ${error.message}</p>
                        </div>
                    `;
                    section.loaded = true;
                }
            }

            // Show content
            content.innerHTML = `
                <article class="fade-in">
                    <div class="prose prose-invert max-w-none">
                        ${section.content}
                    </div>
                </article>
            `;
            updatePageTitle();

            // Update navigation
            document.querySelectorAll('.wiki-nav').forEach(link => {
                link.classList.remove('bg-primary-500/20', 'text-primary-400');
                link.classList.add('text-gray-300');
            });

            const activeLink = document.querySelector(`[data-section="${sectionId}"]`);
            if (activeLink) {
                activeLink.classList.add('bg-primary-500/20', 'text-primary-400');
                activeLink.classList.remove('text-gray-300');
            }
        } catch (error) {
            console.error('Error showing wiki section:', error);
        }
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
        loadWikiContent();
    });
    </script>
</body>
</html>